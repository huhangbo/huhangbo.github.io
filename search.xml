<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>添加loading-pages</title>
      <link href="2021/02/23/tian-jia-loading-pages/"/>
      <url>2021/02/23/tian-jia-loading-pages/</url>
      
        <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><p>添加了一个玩命加载中的网页过渡动画</p><a id="more"></a><p>首先在站点根目录下新建一个文件夹，名为<strong>scripts</strong>，然后在新建的文件夹下新建一个名为<strong>loading-pages</strong>的 js 文件，填入下面的代码：</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">/* global hexo */</span><span class="token string">"use strict"</span><span class="token punctuation">;</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'after_render:html'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>htmlContent<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     <span class="token keyword">const</span> injectHead <span class="token operator">=</span> <span class="token template-string"><span class="token string">`&lt;style type="text/css" lang="css"&gt;    #loading-container&amp;#123;        position: fixed;        top: 0;        left: 0;        min-height: 100vh;        width: 100vw;        z-index: 9999;        display: flex;        flex-direction: column;        justify-content: center;        align-items: center;        background: #FFF;        text-align: center;        /* loader页面消失采用渐隐的方式*/        -webkit-transition: opacity 1s ease;        -moz-transition: opacity 1s ease;        -o-transition: opacity 1s ease;        transition: opacity 1s ease;    &amp;#125;    .loading-image&amp;#123;        width: 120px;        height: 50px;        transform: translate(-50%);    &amp;#125;        .loading-image div:nth-child(2) &amp;#123;        -webkit-animation: pacman-balls 1s linear 0s infinite;        animation: pacman-balls 1s linear 0s infinite    &amp;#125;    .loading-image div:nth-child(3) &amp;#123;        -webkit-animation: pacman-balls 1s linear .33s infinite;        animation: pacman-balls 1s linear .33s infinite    &amp;#125;    .loading-image div:nth-child(4) &amp;#123;        -webkit-animation: pacman-balls 1s linear .66s infinite;        animation: pacman-balls 1s linear .66s infinite    &amp;#125;    .loading-image div:nth-child(5) &amp;#123;        -webkit-animation: pacman-balls 1s linear .99s infinite;        animation: pacman-balls 1s linear .99s infinite    &amp;#125;       .loading-image div:first-of-type &amp;#123;        width: 0;        height: 0;        border: 25px solid #49b1f5;        border-right-color: transparent;        border-radius: 25px;        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;        animation: rotate_pacman_half_up .5s 0s infinite;    &amp;#125;    .loading-image div:nth-child(2) &amp;#123;        width: 0;        height: 0;        border: 25px solid #49b1f5;        border-right-color: transparent;        border-radius: 25px;        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;        animation: rotate_pacman_half_down .5s 0s infinite;        margin-top: -50px;    &amp;#125;    @-webkit-keyframes rotate_pacman_half_up &amp;#123;0% &amp;#123;transform: rotate(270deg)&amp;#125;50% &amp;#123;transform: rotate(1turn)&amp;#125;to &amp;#123;transform: rotate(270deg)&amp;#125;&amp;#125;    @keyframes rotate_pacman_half_up &amp;#123;0% &amp;#123;transform: rotate(270deg)&amp;#125;50% &amp;#123;transform: rotate(1turn)&amp;#125;to &amp;#123;transform: rotate(270deg)&amp;#125;&amp;#125;    @-webkit-keyframes rotate_pacman_half_down &amp;#123;0% &amp;#123;transform: rotate(90deg)&amp;#125;50% &amp;#123;transform: rotate(0deg)&amp;#125;to &amp;#123;transform: rotate(90deg)&amp;#125;&amp;#125;    @keyframes rotate_pacman_half_down &amp;#123;0% &amp;#123;transform: rotate(90deg)&amp;#125;50% &amp;#123;transform: rotate(0deg)&amp;#125;to &amp;#123;transform: rotate(90deg)&amp;#125;&amp;#125;        @-webkit-keyframes pacman-balls &amp;#123;75% &amp;#123;opacity: .7&amp;#125;to &amp;#123;transform: translate(-100px, -6.25px)&amp;#125;&amp;#125;    @keyframes pacman-balls &amp;#123;75% &amp;#123;opacity: .7&amp;#125;to &amp;#123;transform: translate(-100px, -6.25px)&amp;#125;&amp;#125;           .loading-image div:nth-child(3),    .loading-image div:nth-child(4),    .loading-image div:nth-child(5),    .loading-image div:nth-child(6)&amp;#123;        background-color: #49b1f5;        width: 15px;        height: 15px;        border-radius: 100%;        margin: 2px;        width: 10px;        height: 10px;        position: absolute;        transform: translateY(-6.25px);        top: 25px;        left: 100px;    &amp;#125;    .loading-text&amp;#123;        margin-bottom: 20vh;        text-align: center;        color: #2c3e50;        font-size: 2rem;        box-sizing: border-box;        padding: 0 10px;        text-shadow: 0 2px 10px rgba(0,0,0,0.2);    &amp;#125;    @media only screen and (max-width: 500px) &amp;#123;         .loading-text&amp;#123;            font-size: 1.5rem;         &amp;#125;    &amp;#125;    .fadeout &amp;#123;        opacity: 0;        filter: alpha(opacity=0);    &amp;#125;    /* logo出现动画 */    @-webkit-keyframes fadeInDown&amp;#123;0%&amp;#123;opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)&amp;#125;100%&amp;#123;opacity:1;-webkit-transform:none;transform:none&amp;#125;&amp;#125;    @keyframes fadeInDown&amp;#123;0%&amp;#123;opacity:0;-webkit-transform:translate3d(0,-100%,0);&amp;#125;&amp;#125; &lt;/style&gt; &lt;script&gt;(function () &amp;#123;    const loaded = function()&amp;#123;       setTimeout(function()&amp;#123;            const loader = document.getElementById("loading-container");            loader.className="fadeout" ;//使用渐隐的方法淡出loading page            // document.getElementById("body-wrap").style.display="flex";            setTimeout(function()&amp;#123;                loader.style.display="none";            &amp;#125;,1000);         &amp;#125;,1000);//强制显示loading page 1s      &amp;#125;;    loaded();&amp;#125;)() &lt;/script&gt;`</span></span><span class="token punctuation">;</span>     <span class="token keyword">const</span> injectBody <span class="token operator">=</span> <span class="token template-string"><span class="token string">` &lt;div id="loading-container"&gt;     &lt;p class="loading-text"&gt;玩命加载中 . . . &lt;/p&gt;      &lt;div class="loading-image"&gt;         &lt;div&gt;&lt;/div&gt;         &lt;div&gt;&lt;/div&gt;         &lt;div&gt;&lt;/div&gt;         &lt;div&gt;&lt;/div&gt;          &lt;div&gt;&lt;/div&gt;     &lt;/div&gt; &lt;/div&gt;`</span></span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/&lt;\/head&gt;/gi</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>htmlContent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>         <span class="token keyword">let</span> lastIndex <span class="token operator">=</span> htmlContent<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'&lt;/head&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         htmlContent <span class="token operator">=</span> htmlContent<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> lastIndex<span class="token punctuation">)</span> <span class="token operator">+</span> injectHead <span class="token operator">+</span> htmlContent<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>lastIndex<span class="token punctuation">,</span> htmlContent<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/&lt;body&gt;/gi</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>htmlContent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>         <span class="token keyword">let</span> index <span class="token operator">=</span> htmlContent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'&lt;body&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         htmlContent <span class="token operator">=</span> htmlContent<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">+</span> injectBody <span class="token operator">+</span> htmlContent<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> htmlContent<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> htmlContent<span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p> 可以先在本地运行查看效果。<br> 其中玩命加载中文字也可以换成其他文字，只需将上述代码中对应文字修改即可。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
